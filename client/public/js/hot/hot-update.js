webpackHotUpdate(0,{

/***/ 289:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateCenterRequest = exports.createCenterRequest = undefined;\n\nvar _axios = __webpack_require__(40);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _setAuthenticationToken = __webpack_require__(168);\n\nvar _setAuthenticationToken2 = _interopRequireDefault(_setAuthenticationToken);\n\nvar _ = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar centerApi = '/api/v1/centers';\n// import jwtDecode from 'jwt-decode'\n\n\nvar addCenterPayload = function addCenterPayload(payload) {\n  var response = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (response === 'success') {\n    return {\n      type: _.ADD_CENTER_SUCCESS,\n      center: payload\n    };\n  } else if (response === 'request') {\n    return {\n      type: _.ADD_CENTER_REQUEST,\n      center: payload\n    };\n  } else if (response === 'failure') {\n    return {\n      type: _.ADD_CENTER_FAlLURE,\n      center: payload\n    };\n  }\n};\n\nvar updateCenterPayload = function updateCenterPayload(data, res) {\n  if (res === 'success') {\n    return {\n      type: _.EDIT_CENTER,\n      payload: data\n    };\n  } else if (res === 'failure') {\n    return {\n      type: _.EDIT_CENTER_FAILURE,\n      payload: data\n    };\n  }\n};\n\nvar handleImageUpload = function handleImageUpload(file) {\n  var formData = new FormData();\n  formData.append('file', file);\n  formData.append('upload_preset', _.CLOUDINARY_UPLOAD_PRESET);\n  (0, _setAuthenticationToken2.default)(false);\n  return _axios2.default.post(_.CLOUDINARY_URL, formData).then(function (_ref) {\n    var data = _ref.data;\n    return data.url;\n  }).catch(function (err) {\n    console.log(err);\n  });\n};\n\nvar createCenterRequest = exports.createCenterRequest = function createCenterRequest(centerData) {\n  return function (dispatch) {\n    var token = localStorage.getItem('jwtToken') ? localStorage.getItem('jwtToken') : false;\n    handleImageUpload(centerData.img_url).then(function (imgString) {\n      (0, _setAuthenticationToken2.default)(token);\n      centerData.img_url = imgString;\n      dispatch(addCenterPayload(centerData, 'request'));\n      return _axios2.default.post(centerApi, centerData).then(function (_ref2) {\n        var data = _ref2.data;\n\n        if (data.statusCode === 201) {\n          return dispatch(addCenterPayload(data.center, 'success'));\n        } else if (data.statusCode === 401) {\n          window.location.href = '/signin';\n        }\n        return dispatch(addCenterPayload(data, 'failure'));\n      }).catch(function (err) {\n        return dispatch(addCenterPayload(err, 'failure'));\n      });\n    });\n  };\n};\n\nvar updateCenterRequest = exports.updateCenterRequest = function updateCenterRequest(centerData) {\n  return function (dispatch) {\n    return _axios2.default.post(centerApi + '/' + centerData.id, centerData).then(function (_ref3) {\n      var data = _ref3.data;\n\n      if (data.statusCode === 200) {\n        return dispatch(updateCenterPayload(data, 'success'));\n      }\n      Materialize.toast(data.message, 5000);\n      return data;\n    }).catch(function (err) {\n      return dispatch(updateCenterPayload(err, 'failure'));\n    });\n  };\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/src/actions/modalAction.js\n// module id = 289\n// module chunks = 0\n\n//# sourceURL=webpack:///./client/src/actions/modalAction.js?");

/***/ })

})