webpackHotUpdate(0,{

/***/ 285:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(module) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _index = __webpack_require__(14);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(15);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = __webpack_require__(0);\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = __webpack_require__(16);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _reactRedux = __webpack_require__(22);\n\nvar _redux = __webpack_require__(23);\n\nvar _propTypes = __webpack_require__(4);\n\nvar _Dialog = __webpack_require__(82);\n\nvar _Dialog2 = _interopRequireDefault(_Dialog);\n\nvar _FlatButton = __webpack_require__(85);\n\nvar _FlatButton2 = _interopRequireDefault(_FlatButton);\n\nvar _RaisedButton = __webpack_require__(174);\n\nvar _RaisedButton2 = _interopRequireDefault(_RaisedButton);\n\nvar _TextField = __webpack_require__(120);\n\nvar _TextField2 = _interopRequireDefault(_TextField);\n\nvar _DatePicker = __webpack_require__(286);\n\nvar _DatePicker2 = _interopRequireDefault(_DatePicker);\n\nvar _eventsActions = __webpack_require__(86);\n\nvar _formInput = __webpack_require__(67);\n\nvar _formInput2 = _interopRequireDefault(_formInput);\n\nvar _validateInput = __webpack_require__(121);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _components = {\n  EditEventModal: {\n    displayName: 'EditEventModal'\n  }\n};\n\nvar _UsersAndeladeveloperDesktopProjectsEventManagerNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n  filename: '/Users/andeladeveloper/Desktop/projects/event-manager/client/src/components/modals/eventModalForm/editEventModal.jsx',\n  components: _components,\n  locals: [module],\n  imports: [_react3.default]\n});\n\nvar _UsersAndeladeveloperDesktopProjectsEventManagerNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n  filename: '/Users/andeladeveloper/Desktop/projects/event-manager/client/src/components/modals/eventModalForm/editEventModal.jsx',\n  components: _components,\n  locals: [],\n  imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n  return function (Component) {\n    return _UsersAndeladeveloperDesktopProjectsEventManagerNode_modulesReactTransformHmrLibIndexJs2(_UsersAndeladeveloperDesktopProjectsEventManagerNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n  };\n}\n\nvar EditEventModal = _wrapComponent('EditEventModal')(function (_Component) {\n  _inherits(EditEventModal, _Component);\n\n  function EditEventModal(props) {\n    _classCallCheck(this, EditEventModal);\n\n    var _this = _possibleConstructorReturn(this, (EditEventModal.__proto__ || Object.getPrototypeOf(EditEventModal)).call(this, props));\n\n    var startDate = new Date();\n    var endDate = new Date();\n    startDate.setFullYear(startDate.getFullYear() - 1);\n    endDate.setFullYear(endDate.getFullYear() - 1);\n\n    _this.state = {\n      open: false,\n      disableYearSelection: false,\n      isLoading: false,\n      errors: {},\n      eventId: 0,\n      centerId: 0,\n      userId: 0,\n      title: '',\n      img_url: '',\n      startDate: null,\n      endDate: null,\n      description: ''\n    };\n\n    _this.handleInputChange = _this.handleInputChange.bind(_this);\n    _this.handleEventSubmit = _this.handleEventSubmit.bind(_this);\n    _this.onFileChange = _this.onFileChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(EditEventModal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.updateState(this.props);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      this.updateState(newProps);\n    }\n  }, {\n    key: 'onFileChange',\n    value: function onFileChange(e) {\n      var _this2 = this;\n\n      var file = e.target.files[0];\n      if (file.type.indexOf('image/') > -1) {\n        // only image file\n        if (file.size < 2000000) {\n          var reader = new FileReader(); // instance of the FileReader\n          reader.readAsDataURL(file); // read the local file\n          reader.onloadend = function () {\n            _this2.setState({\n              // img_url: reader.result // store image as binary data string\n              img_url: file\n            });\n          };\n        } else {\n          Materialize.toast('File too large', 5000, 'red');\n        }\n      } else {\n        Materialize.toast('Please select only images', 5000, 'red');\n      }\n    }\n  }, {\n    key: 'isValid',\n    value: function isValid() {\n      var _validateEventInput = (0, _validateInput.validateEventInput)(this.state),\n          errors = _validateEventInput.errors,\n          isValid = _validateEventInput.isValid;\n\n      if (!isValid) {\n        this.setState({ errors: errors });\n      }\n      return isValid;\n    }\n  }, {\n    key: 'handleChangeStartDate',\n    value: function handleChangeStartDate(e, date) {\n      if (new Date(date) < this.state.startdDate) {\n        Materialize.toast('Date isn\\'t correct. Should be a day after today not before', 5000, 'red');\n        this.setState({\n          startDate: {}\n        });\n      } else {\n        this.setState({\n          startDate: new Date(date).toDateString()\n        });\n      }\n    }\n  }, {\n    key: 'handleChangeEndDate',\n    value: function handleChangeEndDate(e, date) {\n      if (new Date(date) < this.state.endDate) {\n        Materialize.toast('Date isn\\'t correct. Should be a day after today not before', 5000, 'red');\n        this.setState({\n          endDate: {}\n        });\n      } else {\n        this.setState({\n          endDate: new Date(date).toDateString()\n        });\n      }\n    }\n  }, {\n    key: 'handleInputChange',\n    value: function handleInputChange(e) {\n      if (this.state.errors[e.target.name]) {\n        var _setState;\n\n        var errors = Object.assign({}, !!this.state.errors);\n        delete errors[e.target.name];\n        this.setState((_setState = {}, _defineProperty(_setState, e.target.name, e.target.value), _defineProperty(_setState, 'errors', errors), _setState));\n      } else {\n        this.setState(_defineProperty({}, e.target.name, e.target.value));\n      }\n    }\n  }, {\n    key: 'updateState',\n    value: function updateState(newProps) {\n      if (newProps.event.editEvent) {\n        var _newProps$event$event = newProps.event.eventToEdit,\n            title = _newProps$event$event.title,\n            img_url = _newProps$event$event.img_url,\n            startDate = _newProps$event$event.startDate,\n            endDate = _newProps$event$event.endDate,\n            description = _newProps$event$event.description,\n            centerId = _newProps$event$event.centerId,\n            userId = _newProps$event$event.userId,\n            id = _newProps$event$event.id;\n\n        this.setState({\n          eventId: id,\n          centerId: centerId,\n          userId: userId,\n          title: title,\n          img_url: img_url,\n          startDate: new Date(startDate),\n          endDate: new Date(endDate),\n          description: description\n        });\n      } else if (newProps.activeCenter.centr) {\n        this.setState({\n          centerId: newProps.activeCenter.centr.id,\n          userId: newProps.actUser.user.id\n        });\n      }\n    }\n  }, {\n    key: 'handleEventSubmit',\n    value: function handleEventSubmit(e) {\n      e.preventDefault();\n      if (this.isValid()) {\n        this.setState({\n          isLoading: true\n        });\n\n        this.props.editEventAction(this.state);\n        // .then((data) => {\n        //   this.setState({ isLoading: false });\n        //   if (data.type === EDIT_EVENT) {\n        //     $('#add_event_modal').modal('close');\n        //     // Materialize.toast('Event has been updated successfully', 5000, 'teal');\n        //     this.setState({ title: '', description: '' });\n        //   } else {\n        //     Materialize.toast(data.message, 5000, 'red');\n        //   }\n        // });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          isLoading = _state.isLoading,\n          title = _state.title,\n          description = _state.description,\n          endDate = _state.endDate,\n          startDate = _state.startDate,\n          errors = _state.errors;\n\n      return _react3.default.createElement(\n        'div',\n        { className: 'row', style: { marginTop: '20px' } },\n        _react3.default.createElement(\n          'form',\n          { className: 'col s12', id: 'add-event-form', onSubmit: this.handleEventSubmit },\n          _react3.default.createElement(\n            'div',\n            { className: 'row' },\n            _react3.default.createElement(\n              'div',\n              { className: 'col s6' },\n              _react3.default.createElement(\n                'div',\n                { className: 'file-field input-field' },\n                _react3.default.createElement(\n                  'div',\n                  { className: 'btn' },\n                  _react3.default.createElement(\n                    'span',\n                    null,\n                    'Upload'\n                  ),\n                  _react3.default.createElement('input', {\n                    type: 'file',\n                    name: 'img_url',\n                    accept: 'image/jpeg,jpg,png,gif',\n                    onChange: this.onFileChange\n                  })\n                ),\n                _react3.default.createElement(\n                  'div',\n                  { className: 'file-path-wrapper' },\n                  _react3.default.createElement('input', { className: 'file-path validate', type: 'text', placeholder: 'Upload an image here' })\n                )\n              )\n            ),\n            _react3.default.createElement(\n              'div',\n              { className: 'input-field col s6' },\n              _react3.default.createElement(_TextField2.default, {\n                id: 'event_field',\n                hintText: 'Title',\n                name: 'title',\n                value: title,\n                errorText: errors.title || '',\n                multiLine: false,\n                onChange: this.handleInputChange\n              })\n            )\n          ),\n          _react3.default.createElement(\n            'div',\n            { className: 'row' },\n            _react3.default.createElement(\n              'div',\n              { className: 'input-field col s6' },\n              _react3.default.createElement(_DatePicker2.default, {\n                onChange: this.handleChangeStartDate,\n                autoOk: true,\n                floatingLabelText: 'Start Date',\n                value: startDate,\n                disableYearSelection: this.state.disableYearSelection\n              }),\n              errors.startDate && _react3.default.createElement(\n                'span',\n                { className: 'red-text accent-1' },\n                errors.startDate\n              )\n            ),\n            _react3.default.createElement(\n              'div',\n              { className: 'input-field col s6' },\n              _react3.default.createElement(_DatePicker2.default, {\n                onChange: this.handleChangeEndDate,\n                autoOk: true,\n                floatingLabelText: 'End Date',\n                value: endDate,\n                disableYearSelection: this.state.disableYearSelection\n              }),\n              errors.endDate && _react3.default.createElement(\n                'span',\n                { className: 'red-text accent-1' },\n                errors.endDate\n              )\n            )\n          ),\n          _react3.default.createElement(\n            'div',\n            { className: 'row' },\n            _react3.default.createElement(\n              'div',\n              { className: 'input-field col s12' },\n              _react3.default.createElement(\n                'label',\n                { htmlFor: 'description' },\n                'Description'\n              ),\n              _react3.default.createElement('textarea', {\n                id: 'description',\n                name: 'description',\n                className: 'materialize-textarea validate',\n                required: true,\n                onChange: this.handleInputChange,\n                value: description\n              })\n            )\n          ),\n          _react3.default.createElement(\n            'div',\n            { className: 'row' },\n            _react3.default.createElement(\n              'div',\n              { className: 'input-field col s12' },\n              _react3.default.createElement(\n                'button',\n                {\n                  type: 'submit',\n                  id: 'editEventForm',\n                  name: 'action',\n                  className: 'btn col s12 white-text gradient__bg btn-register waves-effect waves-light',\n                  disabled: isLoading ? 'disabled' : ''\n                },\n                !isLoading ? 'update event' : _react3.default.createElement('img', { style: { marginTop: '10px' }, src: '/image/loader/loading.gif', alt: 'loading gif' })\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return EditEventModal;\n}(_react2.Component));\n\n// EditEventModal.propTypes = {\n//   activeCenter: PropTypes.object.isRequired,\n//   event: PropTypes.object.isRequired,\n//   editEventAction: PropTypes.func.isRequired\n// };\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    activeCenter: state.activeCenter,\n    event: state.eventReducer,\n    actUser: state.authReducer\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({ editEventAction: _eventsActions.editEventAction }, dispatch);\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(EditEventModal);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)(module)))\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/src/components/modals/eventModalForm/editEventModal.jsx\n// module id = 285\n// module chunks = 0\n\n//# sourceURL=webpack:///./client/src/components/modals/eventModalForm/editEventModal.jsx?");

/***/ }),

/***/ 86:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadMoreEvents = exports.deleteEventRequest = exports.editEventAction = exports.editEventRequestAction = exports.fetchEventRequest = exports.createEventRequest = exports.searchEventsDispatch = undefined;\n\nvar _redux = __webpack_require__(23);\n\nvar _axios = __webpack_require__(40);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _ = __webpack_require__(28);\n\nvar _setAuthenticationToken = __webpack_require__(111);\n\nvar _setAuthenticationToken2 = _interopRequireDefault(_setAuthenticationToken);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *  @API Route String\n * * */\nvar api = '/api/v1/events';\n\n/* *\n *  @Event Dispatch Method\n *  @Returns Object\n * * */\nvar eventsDispatchAction = function eventsDispatchAction(type) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (type) {\n    case 'edit':\n      return {\n        type: _.EDIT_EVENT,\n        payload: data\n      };\n\n    case 'edit_request':\n      return {\n        type: _.EDIT_EVENT_REQUEST,\n        payload: data\n      };\n\n    case 'add':\n      return {\n        type: _.ADD_EVENT,\n        payload: data\n      };\n\n    case 'fetch':\n      return {\n        type: _.FETCH_EVENTS,\n        payload: data\n      };\n\n    case 'delete':\n      return {\n        type: _.REMOVE_EVENT,\n        payload: data\n      };\n\n    default:\n      return data;\n  }\n};\n\nvar searchEventsDispatch = exports.searchEventsDispatch = function searchEventsDispatch(data) {\n  return {\n    type: _.SEARCH_EVENT_TITLE,\n    events: data\n  };\n};\n\nvar createEvent = function createEvent(eventData, imgUrl) {\n  return function (dispatch) {\n    var token = localStorage.getItem('jwtToken') ? localStorage.getItem('jwtToken') : false;\n    (0, _setAuthenticationToken2.default)(token);\n    eventData.img_url = imgUrl;\n    return _axios2.default.post(api, eventData).then(function (_ref) {\n      var data = _ref.data;\n\n      dispatch(eventsDispatchAction('add', data.event));\n      Materialize.toast(data.message, 5000, 'teal');\n      location.reload();\n    }).catch(function (err) {\n      console.log(err);\n      Materialize.toast('An Error Occurred..!!!', 5000, 'red');\n    });\n  };\n};\n\n/* *\n *  Initial Create Event Request Action\n *  @Returns Promise\n * * */\nvar createEventRequest = exports.createEventRequest = function createEventRequest(eventData) {\n  return function (dispatch) {\n    if (eventData.img_url.name) {\n      var formData = new FormData();\n      formData.append('file', eventData.img_url);\n      formData.append('upload_preset', _.CLOUDINARY_UPLOAD_PRESET);\n      (0, _setAuthenticationToken2.default)(false);\n      return _axios2.default.post(_.CLOUDINARY_URL, formData).then(function (_ref2) {\n        var data = _ref2.data;\n\n        dispatch(createEvent(eventData, data.url));\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n\n    return dispatch(createEvent(eventData, ''));\n  };\n};\n\n/**\n *  @Fetch Event Action\n *  @Returns Object\n * * */\nvar fetchEventRequest = exports.fetchEventRequest = function fetchEventRequest() {\n  return function (dispatch) {\n    return _axios2.default.get(api).then(function (_ref3) {\n      var data = _ref3.data;\n\n      data.loadingmore = false;\n      data.loadmore = false;\n      dispatch(eventsDispatchAction('fetch', data));\n    });\n  };\n};\n\n/* *\n *  @Edit Event Request Action\n *  @Returns Object\n * * */\nvar editEventRequestAction = exports.editEventRequestAction = function editEventRequestAction(data) {\n  return function (dispatch) {\n    return dispatch(eventsDispatchAction('edit_request', data));\n  };\n};\n\nvar editEvent = function editEvent(eventData, imgUrl) {\n  return function (dispatch) {\n    var token = localStorage.getItem('jwtToken') ? localStorage.getItem('jwtToken') : false;\n    (0, _setAuthenticationToken2.default)(token);\n    eventData.img_url = imgUrl;\n    return _axios2.default.put(api + '/' + eventData.eventId, eventData).then(function (_ref4) {\n      var data = _ref4.data;\n\n      if (data.statusCode === 201) {\n        Materialize.toast(data.message, 5000, 'teal');\n        $('#add_event_modal').modal('close');\n        return dispatch(eventsDispatchAction('edit', data.event));\n      }\n      return data;\n    });\n  };\n};\n\n/* *\n *  @Edit Event Action\n *  @Returns Object\n * * */\nvar editEventAction = exports.editEventAction = function editEventAction(eventData) {\n  return function (dispatch) {\n    if (eventData.img_url.name) {\n      var formData = new FormData();\n      formData.append('file', eventData.img_url);\n      formData.append('upload_preset', _.CLOUDINARY_UPLOAD_PRESET);\n      (0, _setAuthenticationToken2.default)(false);\n      return _axios2.default.post(_.CLOUDINARY_URL, formData).then(function (_ref5) {\n        var data = _ref5.data;\n\n        dispatch(editEvent(eventData, data.url));\n      });\n    }\n    return dispatch(editEvent(eventData, eventData.img_url));\n  };\n};\n\n/* *\n *  @Delete Event Action\n *  @Returns Object\n * * */\nvar deleteEventRequest = exports.deleteEventRequest = function deleteEventRequest(id) {\n  id = parseInt(id, 10);\n  return function (dispatch) {\n    return _axios2.default.delete(api + '/' + id).then(function (_ref6) {\n      var data = _ref6.data;\n\n      if (data.statusCode === 200) {\n        Materialize.toast(data.message, 5000);\n        return dispatch(eventsDispatchAction('delete', data.event));\n      }\n      Materialize.toast(data.message, 5000, 'red');\n      return data;\n    }).catch(function (err) {\n      Materialize.toast(err.message, 5000, 'red');\n    });\n  };\n};\n\n/* *\n *  @Load more Event Request Action\n *  @Returns Object\n * * */\nvar loadMoreEvents = exports.loadMoreEvents = function loadMoreEvents(offset) {\n  return function (dispatch) {\n    dispatch({\n      type: _.LOADMORE_EVENT_REQUEST\n    });\n    return _axios2.default.get(api + '?next=' + offset).then(function (_ref7) {\n      var data = _ref7.data;\n\n      if (data.statusCode === 200) {\n        return dispatch({\n          type: _.LOADMORE_EVENT_SUCCESS,\n          payload: data.events\n        });\n      }\n      return dispatch({\n        type: _.LOADMORE_EVENT_FAILURE\n      });\n    });\n  };\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/src/actions/events-actions/index.js\n// module id = 86\n// module chunks = 0\n\n//# sourceURL=webpack:///./client/src/actions/events-actions/index.js?");

/***/ })

})