{"version":3,"file":"./hot/hot-update.js","sources":["webpack:///client/src/reducers/eventReducer.js"],"sourcesContent":["import isEmpty from 'lodash/isEmpty';\nimport {\n  ADD_EVENT,\n  EDIT_EVENT,\n  EDIT_EVENT_REQUEST,\n  EDIT_EVENT_FAILURE,\n  FETCH_EVENTS,\n  REMOVE_EVENT,\n  LOADMORE_EVENT_REQUEST,\n  LOADMORE_EVENT_SUCCESS,\n  LOADMORE_EVENT_FAILURE,\n  SEARCH_EVENT_TITLE,\n  SEARCH_EVENT_TITLE_FAILED,\n  SESSION_EVENTS,\n  SESSION_EVENTS_FAILURE,\n  ADD_EVENT_FAILURE\n} from '../actions';\n\nconst pageLimit = process.env.DATA_LIMIT;\nlet newState;\n\nexport default (state = {}, action = {}) => {\n  switch (action.type) {\n    case FETCH_EVENTS:\n      return action.payload;\n\n    case ADD_EVENT:\n      newState = { ...state };\n      if (newState.events) {\n        newState.events.unshift(action.payload);\n        newState.totalCount = newState.events.length;\n        newState.pageCount = Math.ceil(newState.totalCount / pageLimit);\n        return newState;\n      }\n      newState.events = [];\n      newState.events.unshift(action.payload);\n      newState.totalCount = newState.events.length;\n      newState.pageCount = Math.ceil(newState.totalCount / pageLimit);\n      newState.eventCreated = true;\n      return newState;\n\n    case ADD_EVENT_FAILURE:\n      newState = {\n        ...state,\n        centerIsBooked: true\n      };\n      return newState;\n\n    case EDIT_EVENT_REQUEST:\n      return {\n        ...state,\n        eventToEdit: action.payload,\n        editEvent: true\n      };\n\n    case EDIT_EVENT:\n      newState = {\n        ...state,\n        isLoading: false,\n      };\n      newState.sessEvents.events.map((event, index) => {\n        if (event.id === action.payload.id) {\n          newState.sessEvents.events[index] = action.payload;\n        }\n      });\n      newState.sessEvents.totalCount = newState.sessEvents.events.length;\n      newState.sessEvents.pageSize = newState.sessEvents.totalCount;\n      newState.sessEvents.pageCount = Math\n        .ceil(newState.sessEvents.totalCount / pageLimit);\n      return newState;\n\n    case EDIT_EVENT_FAILURE:\n      newState = {\n        ...state,\n        isLoading: false\n      };\n      return newState;\n\n    case REMOVE_EVENT:\n      newState = { ...state };\n      newState.sessEvents.events.map((event, index) => {\n        if (event.id === action.payload.id) {\n          delete newState.sessEvents.events[index];\n        }\n      });\n      newState.sessEvents.meta.totalCount = newState.sessEvents.events.length;\n      newState.sessEvents.meta.pageSize = newState.sessEvents.meta.totalCount;\n      newState.sessEvents.meta.pageCount =\n        Math.ceil(newState.sessEvents.meta.totalCount / pageLimit);\n      return newState;\n\n    case SESSION_EVENTS:\n      return {\n        ...state,\n        sessEvents: action.payload\n      };\n\n    case SESSION_EVENTS_FAILURE:\n      newState = {\n        ...state,\n        sessEvents: []\n      };\n      return newState;\n\n    case LOADMORE_EVENT_FAILURE:\n      return {\n        ...state,\n        loadingmore: false\n      };\n\n    case LOADMORE_EVENT_REQUEST:\n      return {\n        ...state,\n        loadmore: true,\n        loadingmore: true\n      };\n\n    case LOADMORE_EVENT_SUCCESS:\n      newState = { ...state, loadingmore: false };\n      newState.sessEvents.events = newState.sessEvents.events\n        .concat(action.payload);\n      newState.sessEvents.meta.page = parseInt(\n        newState.sessEvents.meta.page + 1,\n        10\n      );\n      newState.sessEvents.meta.pageSize = parseInt(\n        newState.sessEvents.meta.pageSize + action.payload.length,\n        10\n      );\n      if (\n        newState.sessEvents.meta.pageSize ===\n        newState.sessEvents.meta.totalCount\n      ) {\n        newState.loadmore = false;\n      }\n      return newState;\n\n    case SEARCH_EVENT_TITLE:\n      newState = { ...state };\n      if (!isEmpty(action.events)) {\n        newState.events = action.events;\n      } else {\n        newState.events = state.events;\n      }\n      return newState;\n\n    case SEARCH_EVENT_TITLE_FAILED:\n      return { ...state, searchFailure: true };\n\n    default:\n      return state;\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;;;;;AAgBA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AAEA;AACA;AAEA;AAAA;AAEA;AAFA;AAEA;AACA;AAIA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAEA;AAJA;AAKA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AAJA;AAKA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAEA;AAAA;AACA;AAGA;AAAA;AAAA;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AAGA;AAAA;AAAA;AAAA;AAEA;AACA;AAIA;AAAA;AACA;AAEA;AAIA;AAKA;AAGA;AAEA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AADA;AAGA;AAEA;AAAA;AACA;AAEA;AAAA;AACA;AAEA;AAhIA;;;;;;A","sourceRoot":""}