{"version":3,"sources":["webpack:///./client/src/components/modals/centerModalForms/editCenterForm.jsx"],"names":["styles","underlineStyle","borderColor","EditCenterForm","props","state","errors","editCenter","isLoading","title","img_url","facilities","location","price","capacity","description","handleCenterChange","bind","handleSelectChange","handleCenterSubmit","onFileChange","updateState","activeCenter","e","file","target","files","type","indexOf","size","reader","FileReader","readAsDataURL","onloadend","setState","result","Materialize","toast","centr","id","toString","name","Object","assign","value","isValid","event","index","facilityes","map","generate","preventDefault","updateCenterRequest","then","res","reload","catch","marginTop","menuItems","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","file":"./hot/hot-update.js","sourcesContent":["import React, { Component } from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport shortid from 'shortid';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { PropTypes } from 'prop-types';\n\nimport TextField from 'material-ui/TextField';\nimport { teal300 } from 'material-ui/styles/colors';\nimport InputForm from '../../form/formInput';\nimport { validateCenterInput } from '../validateInput';\nimport facilitiesDB from '../../../util/facilities';\nimport { updateCenterRequest } from '../../../actions/modalAction';\nimport { EDIT_CENTER } from '../../../actions';\n\nconst styles = {\n  underlineStyle: {\n    borderColor: teal300\n  }\n};\n\nclass EditCenterForm extends Component {\n  constructor(props) {\n    super(props);\n\n    /**\n         * @Initialize the component's state.\n         * */\n    this.state = {\n      errors: {},\n      editCenter: false,\n      isLoading: false,\n      title: '',\n      img_url: {},\n      facilities: [],\n      location: '',\n      price: '',\n      capacity: '',\n      description: ''\n    };\n\n    this.handleCenterChange = this.handleCenterChange.bind(this);\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleCenterSubmit = this.handleCenterSubmit.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n  }\n\n  /* *\n     * @Send activeCenter details to updateState method\n     * */\n  componentDidMount() {\n    this.updateState(this.props.activeCenter);\n  }\n\n  /* *\n     * @Void: Get the image data and set the img_url in the state\n     * to the binary data url.\n     * * */\n  onFileChange(e) {\n    let file = e.target.files[0];\n    if (file.type.indexOf('image/') > -1) { // only image file\n      if (file.size < 2000000) { // Must not be more than 2mb\n        let reader = new FileReader(); // instance of the FileReader\n        reader.readAsDataURL(file); // read the local file\n        reader.onloadend = () => {\n          this.setState({\n            img_url: reader.result // store image as binary data string\n            // img_url: file\n          });\n        };\n      } else {\n        Materialize.toast('File too large', 5000);\n      }\n    } else {\n      Materialize.toast('Image files only', 5000);\n    }\n  }\n\n  /* *\n     * @Check if edit center is set to true.\n     * and get the keys from center object and populate the state\n     * with its appropriate values.\n     * */\n  updateState(props) {\n    if (props.editCenter) {\n      let {\n        id, title, img_url, facilities, location, price, capacity, description\n      } = props.centr;\n      this.setState({\n        editCenter: true,\n        id,\n        title,\n        img_url,\n        facilities,\n        location,\n        price: price.toString(),\n        capacity: capacity.toString(),\n        description\n      });\n    }\n  }\n\n  handleCenterChange(e) {\n    if (this.state.errors[e.target.name]) {\n      let errors = Object.assign({}, !!this.state.errors);\n      delete errors[e.target.name];\n      this.setState({\n        [e.target.name]: e.target.value,\n        errors\n      });\n    } else {\n      this.setState({ [e.target.name]: e.target.value });\n    }\n  }\n\n  isValid() {\n    const { errors, isValid } = validateCenterInput(this.state);\n    if (!isValid) {\n      this.setState({ errors });\n    }\n    return isValid;\n  }\n\n  handleSelectChange(event, index, facilities) {\n    this.setState({ facilities });\n  }\n\n  menuItems(facilityes) {\n    return facilitiesDB().map(name => (\n      <MenuItem\n        key={shortid.generate()}\n        insetChildren\n        checked={facilityes && facilityes.indexOf(name) > -1}\n        value={name}\n        primaryText={name}\n      />\n    ));\n  }\n\n  handleCenterSubmit(e) {\n    e.preventDefault();\n\n    if (this.isValid()) {\n      this.setState({\n        isLoading: true\n      });\n\n      this.props.updateCenterRequest(this.state)\n        .then((res) => {\n          this.setState({ isLoading: false });\n          // console.log(res);\n          if (res.type === EDIT_CENTER) {\n            Materialize.toast('Center has been updated successfully!!', 5000);\n            location.reload();\n          } else {\n            Materialize.toast('Houston, we have a problem! We are working on it', 5000);\n          }\n        })\n        .catch(() => {\n          this.setState({ isLoading: false });\n          Materialize.toast('Error creating center..!!', 5000);\n        });\n    }\n  }\n\n  render() {\n    const {\n      editCenter, errors, isLoading, title, location, facilities, price, capacity, description\n    } = this.state;\n    // console.log(this.state);\n\n    return (\n      <form style={{ marginTop: '20px' }} className=\"col s12\" id=\"edit-center-form\" onSubmit={this.handleCenterSubmit}>\n        <div className=\"row\">\n          <div className=\"col s12 m6\">\n            <div className=\"file-field input-field\">\n              <div className=\"btn\">\n                <span>Upload</span>\n                <input\n                  type=\"file\"\n                  name=\"img_url\"\n                  onChange={this.onFileChange}\n                  accept=\"image/jpeg,jpg,png,gif\"\n                />\n              </div>\n              <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\" placeholder=\"Upload an image here\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"input-field col s12 m6\">\n            <TextField\n              id=\"text-field-controlled\"\n              hintText=\"Title\"\n              value={title}\n              name=\"title\"\n              errorText={errors.title || ''}\n              underlineStyle={styles.underlineStyle}\n              underlineFocusStyle={styles.underlineStyle}\n              onChange={this.handleCenterChange}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s12 m6\">\n            <SelectField\n              multiple\n              hintText=\"Select Facilities\"\n              value={facilities}\n              onChange={this.handleSelectChange}\n            >\n              {this.menuItems(facilities)}\n            </SelectField>\n          </div>\n          <div className=\"input-field col s12 m6\">\n            <TextField\n              id=\"text-field-controlled\"\n              hintText=\"location\"\n              value={location}\n              name=\"location\"\n              errorText={errors.location || ''}\n              underlineStyle={styles.underlineStyle}\n              underlineFocusStyle={styles.underlineStyle}\n              onChange={this.handleCenterChange}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s12 m6\">\n            <TextField\n              id=\"text-field-controlled\"\n              hintText=\"Price\"\n              value={price}\n              name=\"price\"\n              type=\"number\"\n              errorText={errors.price || ''}\n              underlineStyle={styles.underlineStyle}\n              underlineFocusStyle={styles.underlineStyle}\n              onChange={this.handleCenterChange}\n            />\n          </div>\n          <div className=\"input-field col s12 m6\">\n            <TextField\n              id=\"text-field-controlled\"\n              hintText=\"Capacity\"\n              value={capacity}\n              name=\"capacity\"\n              type=\"number\"\n              errorText={errors.capacity || ''}\n              underlineStyle={styles.underlineStyle}\n              underlineFocusStyle={styles.underlineStyle}\n              onChange={this.handleCenterChange}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s12\">\n            <TextField\n              hintText=\"Description\"\n              value={description}\n              name=\"description\"\n              errorText={errors.description || ''}\n              multiLine\n              fullWidth\n              onChange={this.handleCenterChange}\n              underlineStyle={styles.underlineStyle}\n              underlineFocusStyle={styles.underlineStyle}\n              rows={2}\n              rowsMax={5}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s12\">\n            <button\n              type=\"submit\"\n              id=\"submitCenterForm\"\n              name=\"action\"\n              className=\"btn col s12 white-text gradient__bg btn-register waves-effect waves-light\"\n              disabled={isLoading ? 'disabled' : ''}\n            >\n              { !isLoading ? 'Save Changes' :\n              <img style={{ marginTop: '10px' }} src=\"/image/loader/loading.gif\" alt=\"save-changes-loader\" /> }\n            </button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  activeCenter: state.activeCenter\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({ updateCenterRequest }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditCenterForm);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/modals/centerModalForms/editCenterForm.jsx"],"sourceRoot":""}