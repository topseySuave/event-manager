{"version":3,"file":"./hot/hot-update.js","sources":["webpack:///client/src/actions/searchAction.js"],"sourcesContent":["import axios from 'axios';\nimport { isEmpty } from 'lodash';\nimport queryString from 'query-string';\nimport {\n  fetchCentersDispatch,\n  searchCenterDispatch\n} from './center-actions/fetchCenterAction';\nimport { searchEventsDispatch } from './events-actions/index';\nimport { SEARCH_CENTER_TITLE_FAILED, SEARCH_EVENT_TITLE_FAILED } from './';\n\nconst prepareCenterSearchQuery = (searchObject) => {\n  let \n    searchObjectString = queryString.stringify(searchObject, {\n      arrayFormat: 'bracket'\n    });\n  searchApi = `/api/v1/centers?${searchObjectString}`;\n  return searchApi;\n};\n\nconst validateEventSearchQuery = ({ searchBy, search }) => {\n  let searchApi, api;\n\n  if (searchBy) {\n    api = `/api/v1/events?searchBy=${searchBy}&search=`;\n  } else {\n    api = '/api/v1/events?search=';\n  }\n\n  if (!isEmpty(search) && search !== 'undefined') {\n    searchApi = `${api + search}`;\n  }\n\n  return searchApi;\n};\n\nexport const searchAction = (data) => {\n  let searchApi = prepareCenterSearchQuery(data);\n  return dispatch => axios\n    .get(searchApi)\n    .then(({ data }) => {\n      if (data.statusCode === 200) {\n        dispatch(fetchCentersDispatch(data));\n      } else if (data.statusCode === 404) {\n        if (err) {\n          Materialize.toast(\n            'search result do not match center(s)',\n            5000,\n            'red'\n          );\n        }\n      }\n    })\n    .catch((err) => {\n      if (err) {\n        Materialize.toast(\n          'search result do not match center(s)',\n          5000,\n          'red'\n        );\n      }\n    });\n};\n\nexport const filterCenterTitle = value => (dispatch) => {\n  let searchApi = validateCenterSearchQuery(value);\n  return axios.get(searchApi).then(({ data }) => {\n    if (data.statusCode === 200) {\n      dispatch(searchCenterDispatch(data));\n    } else if (data.statusCode === 400) {\n      Materialize.toast(data.message, 5000, 'red');\n      dispatch({\n        type: SEARCH_CENTER_TITLE_FAILED\n      });\n    }\n  });\n};\n\nexport const filterEventTitle = value => (dispatch) => {\n  let searchApi = validateEventSearchQuery(value);\n  return axios.get(searchApi).then(({ data }) => {\n    if (data.statusCode === 200) {\n      dispatch(searchEventsDispatch(data.events));\n    } else if (data.statusCode === 400) {\n      Materialize.toast(data.message, 5000, 'red');\n      dispatch({\n        type: SEARCH_EVENT_TITLE_FAILED\n      });\n    }\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// client/src/actions/searchAction.js"],"mappings":";;;;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;AAGA;AACA;AAAA;AACA;;;;;AACA;AAEA;AADA;AACA;AAGA;AACA;AANA;AACA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AAGA;AACA;AADA;AACA;AAGA;AACA;AADA;AAbA;AACA;AAeA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAMA;AACA;AAdA;AAgBA;AACA;AAMA;AAvBA;AAAA;AAFA;AACA;AA2BA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;;AACA;AAAA;AAIA;AATA;AAFA;AAAA;AACA;AAaA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;;AACA;AAAA;AAIA;AATA;AAFA;AAAA;;;;A","sourceRoot":""}