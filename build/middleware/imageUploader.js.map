{"version":3,"sources":["../../server/middleware/imageUploader.js"],"names":["saveImage","req","res","next","form","Form","parse","err","fields","files","img_url","tempPath","path","originalFilename","copyToPath","readFile","data","writeFile","newPath","unlink","tmpPath"],"mappings":";;;;;;;AAAA;;;;AAEA;;;;;;AAEO,IAAMA,gCAAY,SAAZA,SAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzC,QAAIC,OAAO,IAAI,qBAAWC,IAAf,EAAX;;AAEAD,SAAKE,KAAL,CAAWL,GAAX,EAAgB,UAACM,GAAD,EAAMC,MAAN,EAAcC,KAAd,EAAwB;AAAA,8BACKA,MAAMC,OAAN,CAAc,CAAd,CADL;AAAA,YACzBC,QADyB,mBAC/BC,IAD+B;AAAA,YACfC,gBADe,mBACfA,gBADe;;AAEpC,YAAIC,aAAa,2BAA2BD,gBAA5C;;AAEA,qBAAGE,QAAH,CAAYJ,QAAZ,EAAsB,UAACJ,GAAD,EAAMS,IAAN,EAAe;AACjC;AACA,yBAAGC,SAAH,CAAaC,OAAb,EAAsBF,IAAtB,EAA4B,UAACT,GAAD,EAAS;AACjC;AACA,6BAAGY,MAAH,CAAUC,OAAV,EAAmB,YAAM;AACrB;AACAjB;AACH,iBAHD;AAIH,aAND;AAOH,SATD;AAUH,KAdD;AAeH,CAlBM;AAHP","file":"imageUploader.js","sourcesContent":["import multiparty from 'multiparty';\r\n// import path from 'path'\r\nimport fs from 'fs';\r\n\r\nexport const saveImage = (req, res, next) => {\r\n    let form = new multiparty.Form();\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n        let {path: tempPath, originalFilename} = files.img_url[0];\r\n        let copyToPath = '/public/image/uploads/' + originalFilename;\r\n\r\n        fs.readFile(tempPath, (err, data) => {\r\n            // make copy of image to new location\r\n            fs.writeFile(newPath, data, (err) => {\r\n                // delete temp image\r\n                fs.unlink(tmpPath, () => {\r\n                    // res.send(\"File uploaded to: \" + newPath);\r\n                    next();\r\n                });\r\n            });\r\n        });\r\n    })\r\n}"]}