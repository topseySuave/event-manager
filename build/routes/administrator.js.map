{"version":3,"sources":["../../server/routes/administrator.js"],"names":["router","Router","userController","eventsController","get","req","res","status","sendFile","join","__dirname","query","token","role","send","message","error","getEvents","allUsers","post","removeUsers","assignAdmin","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;AACA,IAAMC,iBAAiB,oBAAvB;AACA,IAAMC,mBAAmB,sBAAzB;;AAEAH,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BA,MAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,0BAA9B,CAAzB;AACD,CAFD,EAGGN,GAHH,CAGO,iBAHP,EAG0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpCA,MAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,4BAA9B,CAAzB;AACD,CALH,EAMGN,GANH,CAMO,QANP,EAMiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3B,MAAID,IAAIM,KAAJ,CAAUC,KAAd,EAAqB;AACnB,QAAIA,QAAQ,yBAAUP,IAAIM,KAAJ,CAAUC,KAApB,CAAZ;AACA,QAAIA,MAAMC,IAAV,EAAgB;AACd,aAAOP,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,gCAA9B,CAAzB,CAAP;AACD;AACF;;AAED,SAAOJ,IAAIC,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAC1BC,aAAS,qBADiB;AAE1BC,WAAO;AAFmB,GAArB,CAAP;AAID,CAlBH,EAmBGZ,GAnBH,CAmBO,qBAnBP,EAmB8BD,iBAAiBc,SAnB/C,EAoBGb,GApBH,CAoBO,YApBP,EAoBqBF,eAAegB,QApBpC,EAqBGC,IArBH,CAqBQ,QArBR,EAqBkBjB,eAAekB,WArBjC,EAsBGD,IAtBH,CAsBQ,SAtBR,EAsBmBjB,eAAemB,WAtBlC;;AAwBAC,OAAOC,OAAP,GAAiBvB,MAAjB","file":"administrator.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport jwtDecode from 'jwt-decode';\nimport User from '../controllers/user';\nimport Event from '../controllers/events';\nimport authenticate from '../middleware/authenticate';\n\nconst router = express.Router();\nconst userController = new User();\nconst eventsController = new Event();\n\nrouter.get('/', (req, res) => {\n  res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/admin.html'));\n})\n  .get('/pending-events', (req, res) => {\n    res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/pending.html'));\n  })\n  .get('/users', (req, res) => {\n    if (req.query.token) {\n      let token = jwtDecode(req.query.token);\n      if (token.role) {\n        return res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/admin-users.html'));\n      }\n    }\n\n    return res.status(401).send({\n      message: 'Unauthorized access',\n      error: true\n    });\n  })\n  .get('/pending-events/all', eventsController.getEvents)\n  .get('/users/all', userController.allUsers)\n  .post('/users', userController.removeUsers)\n  .post('/assign', userController.assignAdmin);\n\nmodule.exports = router;\n"]}