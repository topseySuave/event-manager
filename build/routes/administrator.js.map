{"version":3,"sources":["../../server/routes/administrator.js"],"names":["router","Router","userController","eventsController","get","req","res","status","sendFile","join","__dirname","query","token","role","send","message","error","getEvents","allUsers","post","removeUsers","assignAdmin","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;AACA,IAAMC,iBAAiB,oBAAvB;AACA,IAAMC,mBAAmB,sBAAzB;;AAEAH,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,QAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,0BAA9B,CAAzB;AACH,CAFD,EAGKN,GAHL,CAGS,iBAHT,EAG4B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACrCA,QAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,4BAA9B,CAAzB;AACA,CALL,EAMKN,GANL,CAMS,QANT,EAMmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzB,QAAGD,IAAIM,KAAJ,CAAUC,KAAb,EAAmB;AACf,YAAIA,QAAQ,yBAAUP,IAAIM,KAAJ,CAAUC,KAApB,CAAZ;AACA,YAAGA,MAAMC,IAAT,EAAc;AACV,mBAAOP,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,EAA8B,gCAA9B,CAAzB,CAAP;AACH;AACJ;AACD,WAAOJ,IAAIQ,IAAJ,CAAS;AACZC,iBAAS,qBADG;AAEZC,eAAO;AAFK,KAAT,CAAP;AAIH,CAjBL,EAkBKZ,GAlBL,CAkBS,qBAlBT,EAkBgCD,iBAAiBc,SAlBjD,EAmBKb,GAnBL,CAmBS,YAnBT,EAmBuBF,eAAegB,QAnBtC,EAoBKC,IApBL,CAoBU,QApBV,EAoBoBjB,eAAekB,WApBnC,EAqBKD,IArBL,CAqBU,SArBV,EAqBqBjB,eAAemB,WArBpC;;AAuBAC,OAAOC,OAAP,GAAiBvB,MAAjB","file":"administrator.js","sourcesContent":["import express from 'express';\r\nimport path from 'path';\r\nimport jwtDecode from 'jwt-decode';\r\nimport User from '../controllers/user';\r\nimport Event from '../controllers/events';\r\nimport authenticate from '../middleware/authenticate';\r\n\r\nconst router = express.Router();\r\nconst userController = new User();\r\nconst eventsController = new Event();\r\n\r\nrouter.get('/', (req, res) => {\r\n    res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/admin.html'));\r\n})\r\n    .get('/pending-events', (req, res) => {\r\n     res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/pending.html'));\r\n    })\r\n    .get('/users', (req, res) => {\r\n        if(req.query.token){\r\n            let token = jwtDecode(req.query.token);\r\n            if(token.role){\r\n                return res.status(200).sendFile(path.join(__dirname, '../..', 'client/public/admin-users.html'));\r\n            }\r\n        }\r\n        return res.send({\r\n            message: 'Unauthorized access',\r\n            error: true\r\n        });\r\n    })\r\n    .get('/pending-events/all', eventsController.getEvents)\r\n    .get('/users/all', userController.allUsers)\r\n    .post('/users', userController.removeUsers)\r\n    .post('/assign', userController.assignAdmin);\r\n\r\nmodule.exports = router;\r\n"]}